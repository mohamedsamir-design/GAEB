<div class="land-inquiry-container">
  <!-- Shared Header Section -->
  <app-header [pageTitle]="'ุงูุงุณุชุนูุงู ุนู ุจูุงูุงุช ูุทุน ุงูุฃุฑุงุถู'"
    [pageSubtitle]="'ุงูุจุญุซ ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุทุน ุงูุฃุฑุงุถู ุงููุฎุตุตุฉ ูููุจุงูู ุงูุชุนููููุฉ'" [showBackButton]="true"
    [showHomeButton]="true" [backButtonLabel]="'ุงูุนูุฏุฉ'" [backButtonAriaLabel]="'ุงูุนูุฏุฉ ููุงุฆูุฉ ุงููุจูู ุงูุชุนูููู'"
    (backClicked)="goBack()" (homeClicked)="goHome()" (logoutClicked)="logout()">
  </app-header>

  <div class="container">
    <div class="page-content">
      <!-- Search Form -->
      @if (viewMode() === 'search') {
      <div class="search-section">
        <div class="search-card">
          <h3 class="search-title">
            <span class="search-icon">๐</span>
            ุจุญุซ ุนู ูุทุนุฉ ุฃุฑุถ
          </h3>
          <div class="form-wrapper">
            <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="search-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="referenceNumber" class="form-label">
                    ุงูุฑูู ุงูุชุนุฑููู ููุทุนุฉ ุงูุฃุฑุถ
                    <span class="required">*</span>
                  </label>
                  <input type="text" id="referenceNumber" formControlName="referenceNumber" class="form-input"
                    [class.error]="getFieldError('referenceNumber')" placeholder="ุฃุฏุฎู ุงูุฑูู ุงูุชุนุฑููู (ูุซุงู: 132513)"
                    autocomplete="off" />
                  @if (getFieldError('referenceNumber')) {
                  <div class="error-message">
                    {{ getFieldError('referenceNumber') }}
                  </div>
                  }
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="search-btn" [disabled]="isSearching()" [class.loading]="isSearching()">
                  @if (isSearching()) {
                  <span class="spinner"></span>
                  <span>ุฌุงุฑู ุงูุจุญุซ...</span>
                  } @else {
                  <span class="btn-icon">๐</span>
                  <span>ุจุญุซ</span>
                  }
                </button>

                <button type="button" class="reset-btn" (click)="onReset()" [disabled]="isSearching()">
                  <span class="btn-icon">๐</span>
                  <span>ุฅุนุงุฏุฉ ุชุนููู</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      }

      <!-- Results Section -->
      @if (hasSearched()) {
      <div class="results-section">
        @if (landData()) {
        <div class="results-header">
          <h3 class="results-title">
            <span class="results-icon">๐</span>
            ูุชุงุฆุฌ ุงูุจุญุซ
          </h3>
        </div>

        <!-- Land Data Display (Direct Display After Search) -->
        <div class="result-card">
          <div class="card-header">
            <h4 class="card-title">
              <span class="card-icon">๐ข</span>
              ุจูุงูุงุช ูุทุนุฉ ุงูุฃุฑุถ - {{ landData()?.referenceNumber }}
            </h4>
            <div class="status-badges">
              <span class="status-badge approval" [class.approved]="landData()?.approvalStatus === 'ูุนุชูุฏ'"
                [class.pending]="landData()?.approvalStatus === 'ุชุญุช ุงููุฑุงุฌุนุฉ'">
                <strong>ูููู ุงูุงุนุชูุงุฏ:</strong> {{ landData()?.approvalStatus }}
              </span>
              <span class="status-badge usage" [class.active]="landData()?.usageStatus === 'ูุณุชุฎุฏู'"
                [class.inactive]="landData()?.usageStatus === 'ุบูุฑ ูุณุชุฎุฏู'">
                <strong>ูููู ุงูุงุณุชุฎุฏุงู:</strong> {{ landData()?.usageStatus }}
              </span>
            </div>
          </div>

          <div class="card-content">
            <div class="info-grid">
              <div class="info-section basic-info">
                <h5 class="section-title">
                  <span class="section-icon">โน๏ธ</span>
                  ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุงูุฑูู ุงูุชุนุฑููู:</span>
                    <span class="value">{{ landData()?.identificationNumber }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ููุฏ ุงูุฃุฑุถ:</span>
                    <span class="value">{{ landData()?.landCode }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงูููุฑ:</span>
                    <span class="value">{{ landData()?.headquarters }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑูุฒ/ุงููุณู:</span>
                    <span class="value">{{ landData()?.centerDepartment }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑูุฉ:</span>
                    <span class="value">{{ landData()?.village }}</span>
                  </div>
                  <div class="info-item highlight">
                    <span class="label">ุงููุณุงุญุฉ ุงููููุฉ:</span>
                    <span class="value area">{{ landData()?.totalArea | number:'1.2-2' }} ูยฒ</span>
                  </div>
                </div>
              </div>

              <div class="info-section ownership-info">
                <h5 class="section-title">
                  <span class="section-icon">๐ค</span>
                  ูุนูููุงุช ุงูููููุฉ
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุงููุงูู ุงูุญุงูู:</span>
                    <span class="value">{{ landData()?.currentOwner }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุงูู ุงูุฃุตูู:</span>
                    <span class="value">{{ landData()?.originalOwner }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑุญูุฉ:</span>
                    <span class="value">{{ landData()?.phase }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููููุฐุฌ:</span>
                    <span class="value">{{ landData()?.model }}</span>
                  </div>
                </div>
              </div>

              <div class="info-section financial-info">
                <h5 class="section-title">
                  <span class="section-icon">๐ฐ</span>
                  ุงููุนูููุงุช ุงููุงููุฉ
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุชุณุนูุฑ ุงููุฌูุฉ:</span>
                    <span class="value price">{{ landData()?.committeePricing | number }} ุฌ.ู</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุณุนุฑ ุงูุดุฑุงุก:</span>
                    <span class="value price">{{ landData()?.purchasePrice | number }} ุฌ.ู</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ููุงูุถุงุช ุงูุจูุน:</span>
                    <span class="value">{{ landData()?.saleNegotiations }}</span>
                  </div>
                </div>
              </div>

              <div class="info-section status-info">
                <h5 class="section-title">
                  <span class="section-icon">๐</span>
                  ุงูุญุงูุฉ ูุงููุณุชูุฏุงุช
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุงูุงุนุชูุงุฏ:</span>
                    <span class="value status" [class.approved]="landData()?.approval === 'ููุงูู'"
                      [class.pending]="landData()?.approval === 'ููุฏ ุงูุฏุฑุงุณุฉ'">
                      {{ landData()?.approval }}
                    </span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงูุชุณููู:</span>
                    <span class="value">{{ landData()?.housing }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุณุชูุฏุงุช:</span>
                    <span class="value documents" [class.complete]="landData()?.documents === 'ููุชููุฉ'"
                      [class.incomplete]="landData()?.documents === 'ูุงูุตุฉ'">
                      {{ landData()?.documents }}
                    </span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงูุฎุทุฉ:</span>
                    <span class="value">{{ landData()?.plan }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุฅุฎุทุงุฑ ุงููุฑุน:</span>
                    <span class="value">{{ landData()?.branchNotification }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ูููู ุงูุนูุงุฑูุฉ:</span>
                    <span class="value">{{ landData()?.realEstateStatus }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Options Menu Section -->
        <div class="options-menu-section">
          <h3 class="options-title">
            <span class="options-icon">๐</span>
            ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ
          </h3>
          <div class="options-grid">
            <button class="option-card" (click)="navigateToDataAvailability()" type="button">
              <div class="option-icon">๐</div>
              <div class="option-content">
                <h4 class="option-title">ุชูุงูุฑ ุงูุจูุงูุงุช</h4>
                <p class="option-description">ุงูุชุญูู ูู ุชูุงูุฑ ุงูุจูุงูุงุช ูุงููุณุชูุฏุงุช</p>
              </div>
              <div class="option-arrow">โ</div>
            </button>

            <button class="option-card" (click)="navigateToBuildingInquiry()" type="button">
              <div class="option-icon">๐๏ธ</div>
              <div class="option-content">
                <h4 class="option-title">ุงุณุชุนูุงู ุงููุจูู</h4>
                <p class="option-description">ุงุณุชุนูุงู ุนู ุจูุงูุงุช ุงููุจูู</p>
              </div>
              <div class="option-arrow">โ</div>
            </button>

            <button class="option-card full-width" (click)="showFullDisplay()" type="button">
              <div class="option-icon">๐</div>
              <div class="option-content">
                <h4 class="option-title">ุงูุนุฑุถ ุงููุงูู</h4>
                <p class="option-description">ุนุฑุถ ุฌููุน ุงูุชูุงุตูู ูุงูุจูุงูุงุช ุงููุงููุฉ</p>
              </div>
              <div class="option-arrow">โ</div>
            </button>
          </div>
        </div>
        } @else {
        <div class="no-results">
          <div class="no-results-icon">๐ญ</div>
          <h3 class="no-results-title">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
          <p class="no-results-message">
            ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ููุฐุง ุงูุฑูู ุงูุชุนุฑููู.
            <br>
            ุชุฃูุฏ ูู ุตุญุฉ ุงูุฑูู ูุญุงูู ูุฑุฉ ุฃุฎุฑู.
          </p>
        </div>
        }
      </div>
      }


      <!-- Building Inquiry Popup Modal -->
      @if (showBuildingPopup()) {
      <div class="popup-overlay" (click)="closeBuildingPopup()">
        <div class="popup-content" (click)="$event.stopPropagation()">
          <div class="popup-header">
            <h3 class="popup-title">
              <span class="popup-icon">๐๏ธ</span>
              ุงุณุชุนูุงู ุงููุจูู - ููุงูุน ุงูุจูุงุก
            </h3>
            <button class="close-btn" (click)="closeBuildingPopup()" type="button">
              <span>โ</span>
            </button>
          </div>

          <div class="popup-body">
            <div class="building-table-container">
              <table class="building-data-table">
                <thead>
                  <tr>
                    <th>ููุฏ ุงูุญุฏ</th>
                    <th>ุงุณู ุงูุญุฏ</th>
                    <th>ุทูู ุงูุญุฏ</th>
                    <th>ุฌุงุฑ ููุงุตู</th>
                    <th>ููุณูุจ ุงูุฌุงุฑ</th>
                    <th>ุงูุงุณูุงุฑ</th>
                    <th>ูุตู ุงูุฌุงุฑ</th>
                  </tr>
                </thead>
                <tbody>
                  @for (building of buildingData() | sortByCode; track building.id) {
                  <tr class="building-row">
                    <td class="building-code">{{ building.code }}</td>
                    <td class="location-name">{{ building.locationName }}</td>
                    <td class="coordinates">{{ building.coordinates }}</td>
                    <td class="status">{{ building.status }}</td>
                    <td class="empty-field">-</td>
                    <td class="required-status">{{ building.requiredStatus }}</td>
                    <td class="location-description">{{ building.neighborDescription || 'ุดุงุฑุน ุงูููู' }}</td>
                  </tr>
                  }
                </tbody>
              </table>
            </div>
          </div>

          <div class="popup-footer">
            <button class="close-popup-btn" (click)="closeBuildingPopup()" type="button">
              <span class="btn-icon">โ</span>
              <span>ุฅุบูุงู</span>
            </button>
          </div>
        </div>
      </div>
      }

      <!-- Land Coordinates Popup Modal -->
      @if (showLandCoordinatesPopup()) {
      <div class="popup-overlay" (click)="closeLandCoordinatesPopup()">
        <div class="popup-content" (click)="$event.stopPropagation()">
          <div class="popup-header">
            <h3 class="popup-title">
              <span class="popup-icon">๐</span>
              ุฅุญุฏุงุซูุงุช ูุทุนุฉ ุงูุฃุฑุถ
            </h3>
            <button class="close-btn" (click)="closeLandCoordinatesPopup()" type="button">
              <span>โ</span>
            </button>
          </div>

          <div class="popup-body">
            <div class="coordinates-container">
              <div class="coordinate-card">
                <div class="coordinate-icon">๐</div>
                <div class="coordinate-info">
                  <h4 class="coordinate-label">ุฎุท ุงูุนุฑุถ (Latitude)</h4>
                  <p class="coordinate-value">30.0444ยฐ N</p>
                </div>
              </div>

              <div class="coordinate-card">
                <div class="coordinate-icon">๐บ๏ธ</div>
                <div class="coordinate-info">
                  <h4 class="coordinate-label">ุฎุท ุงูุทูู (Longitude)</h4>
                  <p class="coordinate-value">31.2357ยฐ E</p>
                </div>
              </div>

              <div class="coordinate-card">
                <div class="coordinate-icon">๐</div>
                <div class="coordinate-info">
                  <h4 class="coordinate-label">ุงููุณุงุญุฉ</h4>
                  <p class="coordinate-value">{{ landData()?.totalArea | number:'1.2-2' }} ูยฒ</p>
                </div>
              </div>

              <div class="coordinate-card full-width">
                <div class="coordinate-icon">๐</div>
                <div class="coordinate-info">
                  <h4 class="coordinate-label">ุงูุนููุงู</h4>
                  <p class="coordinate-value">{{ landData()?.headquarters }} - {{ landData()?.village }}</p>
                </div>
              </div>
            </div>
          </div>

          <div class="popup-footer">
            <button class="close-popup-btn" (click)="closeLandCoordinatesPopup()" type="button">
              <span class="btn-icon">โ</span>
              <span>ุฅุบูุงู</span>
            </button>
          </div>
        </div>
      </div>
      }

      <!-- Land Data Popup Modal -->
      @if (showLandDataPopup()) {
      <div class="popup-overlay" (click)="closeLandDataPopup()">
        <div class="popup-content large" (click)="$event.stopPropagation()">
          <div class="popup-header">
            <h3 class="popup-title">
              <span class="popup-icon">๐๏ธ</span>
              ุงุณุชุนูุงู ุนู ุจูุงูุงุช ูุทุนุฉ ุงูุงุฑุถ - {{ landData()?.referenceNumber }}
            </h3>
            <button class="close-btn" (click)="closeLandDataPopup()" type="button">
              <span>โ</span>
            </button>
          </div>

          <div class="popup-body">
            <div class="land-data-grid">
              <div class="info-section basic-info">
                <h5 class="section-title">
                  <span class="section-icon">โน๏ธ</span>
                  ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุงูุฑูู ุงูุชุนุฑููู:</span>
                    <span class="value">{{ landData()?.identificationNumber }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ููุฏ ุงูุฃุฑุถ:</span>
                    <span class="value">{{ landData()?.landCode }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงูููุฑ:</span>
                    <span class="value">{{ landData()?.headquarters }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑูุฒ/ุงููุณู:</span>
                    <span class="value">{{ landData()?.centerDepartment }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑูุฉ:</span>
                    <span class="value">{{ landData()?.village }}</span>
                  </div>
                  <div class="info-item highlight">
                    <span class="label">ุงููุณุงุญุฉ ุงููููุฉ:</span>
                    <span class="value area">{{ landData()?.totalArea | number:'1.2-2' }} ูยฒ</span>
                  </div>
                </div>
              </div>

              <div class="info-section ownership-info">
                <h5 class="section-title">
                  <span class="section-icon">๐ค</span>
                  ูุนูููุงุช ุงูููููุฉ
                </h5>
                <div class="info-items">
                  <div class="info-item">
                    <span class="label">ุงููุงูู ุงูุญุงูู:</span>
                    <span class="value">{{ landData()?.currentOwner }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุงูู ุงูุฃุตูู:</span>
                    <span class="value">{{ landData()?.originalOwner }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููุฑุญูุฉ:</span>
                    <span class="value">{{ landData()?.phase }}</span>
                  </div>
                  <div class="info-item">
                    <span class="label">ุงููููุฐุฌ:</span>
                    <span class="value">{{ landData()?.model }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="popup-footer">
            <button class="close-popup-btn" (click)="closeLandDataPopup()" type="button">
              <span class="btn-icon">โ</span>
              <span>ุฅุบูุงู</span>
            </button>
          </div>
        </div>
      </div>
      }

      <!-- Data Availability Popup Modal -->
      @if (showDataAvailabilityPopup()) {
      <div class="popup-overlay" (click)="closeDataAvailabilityPopup()">
        <div class="popup-content large" (click)="$event.stopPropagation()">
          <div class="popup-header">
            <h3 class="popup-title">
              <span class="popup-icon">๐</span>
              ุชูุงูุฑ ุงูุจูุงูุงุช
            </h3>
            <button class="close-btn" (click)="closeDataAvailabilityPopup()" type="button">
              <span>โ</span>
            </button>
          </div>

          <div class="popup-body">
            <div class="availability-grid">
              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐ฅ</span>
                  <h4 class="availability-title">ูุฌุงู ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landCommittees === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landCommittees }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ุญุฏูุฏ ูุทุนุฉ ุงูุฃุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.buildingBoundaries === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.buildingBoundaries }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ูุฑุงูู ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landFacilities === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landFacilities }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐บ๏ธ</span>
                  <h4 class="availability-title">ุงุญุฏุงุซูุงุช ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landCoordinatesData === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landCoordinatesData }}</span>
                </div>
              </div>
              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ููุงุญุธุงุช ูุนุงููุฉ ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landInspectionDatabase === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landInspectionDatabase }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">โ๏ธ</span>
                  <h4 class="availability-title">ุนูุงุฆู ุฅูุดุงุก ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landCreationObstacles === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landCreationObstacles }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ูุณุชูุฏุงุช ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landConstructionData === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landConstructionData }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ุจูุงูุงุช ุงูููุฒุงููุฉ ุงูุดุจููุฉ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.networkData === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.networkData }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ููุงุญุธุงุช ุงูููุฒุงููุฉ ุงูุดุจููุฉ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.networkObservations === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.networkObservations }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ูุฌุงู ูุฑุงุฌุนุฉ ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landReviewCommittees === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landReviewCommittees }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ุงูุฏุฑุงุณุงุช ุงูุชุฑุจููุฉ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.educationalStudies === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.educationalStudies }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">โ</span>
                  <h4 class="availability-title">ูููู ุงุณุชูุงู ูุทุนุฉ ุงูุงุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.landReceiptDatabase === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.landReceiptDatabase }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐ฐ</span>
                  <h4 class="availability-title">ุงููุจุงูุบ ุงููุฏููุนุฉ ููุฃุฑุถ</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.paidAmountsDatabase === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.paidAmountsDatabase }}</span>
                </div>
              </div>

              <div class="availability-card">
                <div class="availability-header">
                  <span class="availability-icon">๐</span>
                  <h4 class="availability-title">ุจูุงูุงุช ูุฑุงุฑ ุงูุชุฎุตูุต</h4>
                </div>
                <div class="availability-status" [class.available]="landData()?.decisionData === 'ููุฌูุฏ'">
                  <span class="status-indicator"></span>
                  <span class="status-text">{{ landData()?.decisionData }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="popup-footer">
            <button class="close-popup-btn" (click)="closeDataAvailabilityPopup()" type="button">
              <span class="btn-icon">โ</span>
              <span>ุฅุบูุงู</span>
            </button>
          </div>
        </div>
      </div>
      }

      <!-- Full Display Popup Modal (Empty) -->
      @if (showFullDisplayPopup()) {
      <div class="popup-overlay" (click)="closeFullDisplayPopup()">
        <div class="popup-content full-display-popup" (click)="$event.stopPropagation()">
          <div class="popup-header">
            <h3 class="popup-title">
              <span class="popup-icon">๐</span>
              ุงูุนุฑุถ ุงููุงูู - ุจูุงูุงุช ุงููุจูู
            </h3>
            <button class="close-btn" (click)="closeFullDisplayPopup()" type="button">
              <span>โ</span>
            </button>
          </div>

          <div class="popup-body">
            @if (isLoadingBuilding()) {
            <div class="loading-container">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงููุจูู...</p>
            </div>
            } @else if (buildingFullData()) {
            <div class="building-full-display">

              <!-- Basic Information Section -->
              <div class="data-section">
                <h3 class="section-title">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ุฑูู ุงููุจูู:</label>
                    <span>{{ buildingFullData()?.buildingNumber || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงุณู ุงููุฏุฑุณุฉ:</label>
                    <span>{{ buildingFullData()?.schoolName || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงููุฑุญูุฉ:</label>
                    <span>{{ buildingFullData()?.stage || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงูุฅุฏุงุฑุฉ ุงูุชุนููููุฉ:</label>
                    <span>{{ buildingFullData()?.educationalAdministration || '-' }}</span>
                  </div>
                </div>
              </div>

              <!-- Usage & Students Section -->
              <div class="data-section">
                <h3 class="section-title">ุงูุงุณุชุฎุฏุงู ูุฃุนุฏุงุฏ ุงูุทูุงุจ</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ูุชุฑุงุช ุงูุงุณุชุฎุฏุงู:</label>
                    <span>{{ buildingFullData()?.basicData?.usagePeriods || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงูููุน:</label>
                    <span>{{ buildingFullData()?.basicData?.gender || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงุณู ูุฏุฑุณุฉ ุงููุชุฑุฉ ุงูุซุงููุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.secondPeriodSchoolName || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงุณู ูุฏุฑุณุฉ ุงููุชุฑุฉ ุงูุซุงูุซุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.thirdPeriodSchoolName || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุฅุฌูุงูู ุนุฏุฏ ุงูุทูุงุจ:</label>
                    <span>{{ buildingFullData()?.basicData?.totalStudents || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุนุฏุฏ ุงูุทูุงุจ (ุจููู):</label>
                    <span>{{ buildingFullData()?.basicData?.boysCount || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุนุฏุฏ ุงูุทูุงุจ (ุจูุงุช):</label>
                    <span>{{ buildingFullData()?.basicData?.girlsCount || 0 }}</span>
                  </div>
                </div>
              </div>

              <!-- Land & Construction Section -->
              <div class="data-section">
                <h3 class="section-title">ุงูุฃุฑุถ ูุงูุฅูุดุงุกุงุช</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ููููุฉ ุงูุฃุฑุถ:</label>
                    <span>{{ buildingFullData()?.basicData?.landOwnership || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุนุฏุฏ ุงูููุงุญู:</label>
                    <span>{{ buildingFullData()?.basicData?.annexesCount || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ููุน ุงูุณูุฑ:</label>
                    <span>{{ buildingFullData()?.basicData?.fenceType || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ูุธุงู ุงูุฅูุดุงุก:</label>
                    <span>{{ buildingFullData()?.basicData?.constructionSystem || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุทุฑููุฉ ุงูุฅูุดุงุก:</label>
                    <span>{{ buildingFullData()?.basicData?.constructionMethod || '-' }}</span>
                  </div>
                </div>
              </div>

              <!-- Infrastructure Section -->
              <div class="data-section">
                <h3 class="section-title">ุงููุฑุงูู ูุงูุจููุฉ ุงูุชุญุชูุฉ</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ูุตุฏุฑ ุงูุทุงูุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.powerSource || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ูุธุงู ุงูุตุฑู ุงูุตุญู:</label>
                    <span>{{ buildingFullData()?.basicData?.sewerageSystem || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ูุตุฏุฑ ุงูููุงู:</label>
                    <span>{{ buildingFullData()?.basicData?.waterSupply || '-' }}</span>
                  </div>
                </div>
              </div>

              <!-- Facilities Count Section -->
              <div class="data-section">
                <h3 class="section-title">ุฃุนุฏุงุฏ ุงููุฑุงูู</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ุนุฏุฏ ุงููุตูู:</label>
                    <span>{{ buildingFullData()?.basicData?.classroomsCount || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุนุฏุฏ ุงููุฑุงุบุงุช ุงูุชุนููููุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.educationalSpacesCount || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงููุฑุงุบุงุช ุงูุชูููููุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.complementarySpacesCount || 0 }}</span>
                  </div>
                  <div class="data-item">
                    <label>ูููู ุงูุงุณุชุถุงูุฉ:</label>
                    <span>{{ buildingFullData()?.basicData?.hostingStatus || '-' }}</span>
                  </div>
                </div>
              </div>

              <!-- Location Details Section -->
              <div class="data-section">
                <h3 class="section-title">ุจูุงูุงุช ุงููููุน</h3>
                <div class="data-grid">
                  <div class="data-item">
                    <label>ุงููุญุงูุธุฉ:</label>
                    <span>{{ buildingFullData()?.governorate || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงููุฏูุฑูุฉ:</label>
                    <span>{{ buildingFullData()?.district || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงููุฑูุฉ:</label>
                    <span>{{ buildingFullData()?.village || '-' }}</span>
                  </div>
                  <div class="data-item">
                    <label>ุงูุนููุงู:</label>
                    <span>{{ buildingFullData()?.address || '-' }}</span>
                  </div>
                </div>
              </div>
            </div>
            }
            @else {
            <div class="empty-message">
              <div class="empty-icon">๐ญ</div>
              <h4 class="empty-title">ูุง ุชูุฌุฏ ุจูุงูุงุช ูุชุงุญุฉ</h4>
              <p class="empty-description">ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุจูู</p>
            </div>
            }
          </div>

          <div class="popup-footer">
            <button class="close-popup-btn" (click)="closeFullDisplayPopup()" type="button">
              <span class="btn-icon">โ</span>
              <span>ุฅุบูุงู</span>
            </button>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
</div>